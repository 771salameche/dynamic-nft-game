specVersion: 1.3.0
schema:
  file: ./schema.graphql
dataSources:
  # GameCharacter Contract
  - kind: ethereum
    name: GameCharacter
    network: polygon-amoy
    source:
      address: "0x095c03b93ceFadb99Ea93c2b0EEDc4d9B4DB1cF0"
      abi: GameCharacter
      startBlock: 16500000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Character
        - Player
        - LevelUp
        - ExperienceGained
      abis:
        - name: GameCharacter
          file: ./abis/GameCharacter.json
      eventHandlers:
        - event: CharacterMinted(indexed uint256,indexed address,string)
          handler: handleCharacterMinted
        - event: LevelUp(indexed uint256,uint256,uint256)
          handler: handleLevelUp
        - event: TraitsUpdated(indexed uint256,uint256,uint256,uint256,uint256,uint256)
          handler: handleTraitsUpdated
        - event: ExperienceGained(indexed uint256,uint16,uint256)
          handler: handleExperienceGained
      file: ./src/game-character.ts
  
  # GameToken Contract
  - kind: ethereum
    name: GameToken
    network: polygon-amoy
    source:
      address: "0xec52571415b600EA511880847A321e3Dbe6aD0eF"
      abi: GameToken
      startBlock: 16500000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Player
        - TokenTransfer
      abis:
        - name: GameToken
          file: ./abis/GameToken.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/game-token.ts
  
  # CharacterStaking Contract
  - kind: ethereum
    name: CharacterStaking
    network: polygon-amoy
    source:
      address: "0xE217f59ED6732D618d62e1C8BA402C9c11d9dd3B"
      abi: CharacterStaking
      startBlock: 16500000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - StakedCharacter
        - Player
        - RewardClaim
      abis:
        - name: CharacterStaking
          file: ./abis/CharacterStaking.json
      eventHandlers:
        - event: Staked(indexed address,indexed uint256,uint256)
          handler: handleStaked
        - event: Unstaked(indexed address,indexed uint256,uint256)
          handler: handleUnstaked
        - event: RewardsClaimed(indexed address,uint256)
          handler: handleRewardsClaimed
      file: ./src/character-staking.ts
  
  # CharacterBreeding Contract
  - kind: ethereum
    name: CharacterBreeding
    network: polygon-amoy
    source:
      address: "0x46670A0AC823800b36179E0B2fBf16fF67ca13Bc"
      abi: CharacterBreeding
      startBlock: 16500000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - BreedingEvent
        - Character
      abis:
        - name: CharacterBreeding
          file: ./abis/CharacterBreeding.json
      eventHandlers:
        - event: CharacterBred(indexed uint256,indexed uint256,uint256,uint256)
          handler: handleCharacterBred
        - event: CharactersFused(indexed uint256,indexed uint256,uint256,uint256)
          handler: handleCharactersFused
      file: ./src/character-breeding.ts
  
  # AchievementTracker Contract
  - kind: ethereum
    name: AchievementTracker
    network: polygon-amoy
    source:
      address: "0x798C7A24918c6bBC5685AcF296A8A07CDe7cCcF1"
      abi: AchievementTracker
      startBlock: 16500000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Achievement
        - PlayerAchievement
      abis:
        - name: AchievementTracker
          file: ./abis/AchievementTracker.json
      eventHandlers:
        - event: AchievementUnlocked(indexed address,indexed uint256,uint256,uint256)
          handler: handleAchievementUnlocked
        - event: AchievementAdded(indexed uint256,string,uint8)
          handler: handleAchievementAdded
      file: ./src/achievement-tracker.ts
